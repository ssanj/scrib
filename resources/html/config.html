<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Scrib - Config</title>
  <link rel="stylesheet" href="css/bulma.min.css">
  <link rel="stylesheet" href="css/md.css">
  <link rel="stylesheet" href="css/scrib.css">
  <script src="js/scrib-config.js"></script>
  <script src="js/ports.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/util.js"></script>
</head>
  <body>
  <div id="myapp"></div>
  <script>

      //TODO: We should try and move this to ports
      //We could also create a namespace for ports and do something like
      //const ports = initPorts();
      //ports.appEditKey
      const appApiKey  = 'scrib.api.key';

      const app = Elm.Config.init({
        flags: initLoad(),
        node: document.getElementById('myapp')
      });

      app.ports.scribMessage.subscribe(function(action){
        portActions(action, app.ports.jsMessage.send);
      });

     function initLoad() {
      const apiKey     = localStorage.getItem(appApiKey);
      return getApiKey(localStorage, appApiKey);
    }

    document.addEventListener('DOMContentLoaded', () => burgerMenu(document));
  </script>
  </body>
</html>